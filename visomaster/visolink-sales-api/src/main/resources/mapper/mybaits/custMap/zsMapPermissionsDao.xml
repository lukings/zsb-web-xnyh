<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.visolink.system.custMap.dao.ZsMapPermissionsDao">
	<insert id="save">
		INSERT INTO b_zsmap_permissions (permissions_id,account_id,area_permissions,area_start_date,area_end_date,proj_permissions,proj_start_date,proj_end_date,permissions_type,create_by,create_time,update_by,update_time,is_del) VALUES
			(#{permissionsId},#{accountId},#{areaPermissions},#{areaStartDate},#{areaEndDate},#{projPermissions},#{projStartDate},#{projEndDate},#{permissionsType},#{createBy},#{createTime},#{updateBy},#{updateTime},#{isDel})
	</insert>
	<update id="update">
		update b_zsmap_permissions set
			area_permissions = #{areaPermissions},
			area_start_date = #{areaStartDate},
			area_end_date = #{areaEndDate},
			proj_permissions = #{projPermissions},
			proj_start_date = #{projStartDate},
			proj_end_date = #{projEndDate},
			permissions_type = #{permissionsType},
			update_by = #{updateBy},
			update_time =#{updateTime}
			where permissions_id = #{permissionsId}
	</update>

	<update id="deletePermissionsById">
		update b_zsmap_permissions set
		is_del=1,
		update_by = #{updateBy},
		update_time =#{updateTime}
		where permissions_id = #{permissionsId}
	</update>


	<select id="getMapPermissions"
		resultType="cn.visolink.system.custMap.bo.ZsMapPermissionsBO">
		select permissions_id permissionsId,
			account_id accountId,
			area_permissions areaPermissions,
			area_start_date areaStartDate,
			area_end_date areaEndDate,
			proj_permissions projPermissions,
			proj_start_date projStartDate,
			proj_end_date projEndDate,
			permissions_type permissionsType,
			create_by createBy,
			create_time createTime,
			update_by updateBy,
			update_time updateTime,
			is_del isDel
		from b_zsmap_permissions where is_del = 0 and account_id in
			<foreach collection="accountIds" item="accountId" open="(" separator="," close=")">
				#{accountId}
			</foreach>
	</select>
	<select id="query" resultType="cn.visolink.system.custMap.bo.ZsMapPermissionsBO">
		select permissions_id permissionsId,
					 account_id accountId,
					 area_permissions areaPermissions,
					 area_start_date areaStartDate,
					 area_end_date areaEndDate,
					 proj_permissions projPermissions,
					 proj_start_date projStartDate,
					 proj_end_date projEndDate,
					 permissions_type permissionsType,
					 create_by createBy,
					 create_time createTime,
					 update_by updateBy,
					 update_time updateTime,
					 is_del isDel
		from b_zsmap_permissions where is_del = 0 and permissions_id = #{permissionsId}
	</select>
</mapper>
